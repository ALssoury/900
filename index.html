<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALssouRy_Station</title> 
    
    <link rel="stylesheet" href="btn.css">
    
<script src="main_exploit.js"></script>
    
    <script>
        // دالة جديدة لتحميل أي حمولة يختارها المستخدم بعد نجاح الاستغلال
        async function loadCustomPayload(payloadFileName) {
            document.getElementById("mymenu").style.display = 'none'; 
            window.log(`[PAYLOAD] Loading ${payloadFileName}...`);
            // ملاحظة: دالة PayloadLoader موجودة في bundle.js أو ملفات أخرى
            const jb_step_status = await PayloadLoader(payloadFileName, 1); 

            if (jb_step_status === 1) {
                window.log(`[SUCCESS] ${payloadFileName} loaded successfully.`);
            } else {
                window.log(`[ERROR] Failed to load ${payloadFileName}.`);
            }
        }
        
        // لإظهار القائمة بعد اكتمال تحميل GoldHEN الافتراضي (يجب استدعاؤها من داخل دالة doJBwithPSFreeLapseExploit في bundle.js)
        function jbdone() {
            // يتم إخفاء شريط التحميل وعرض القائمة
            document.getElementById("loadingContainer").style.display = 'none'; 
            document.getElementById("mymenu").style.display = 'block';
        }

        // Logging utility - للتأكد من وجود الدالة قبل استخدامها في loadCustomPayload
        const outputConsole = document.getElementById("console");
        window.log = (msg) => { 
            const consoleElement = document.getElementById("console");
            if (consoleElement) {
                consoleElement.textContent += msg + "\n";
                // التمرير للأسفل تلقائياً
                consoleElement.scrollTop = consoleElement.scrollHeight;
            }
        };

    </script>
    
    <style>
        /* إعادة تعريف الأنماط للتنظيف */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: url('alssoury_1ogo.jpg') center center / cover no-repeat,
                        linear-gradient(to bottom right, #063FAB, #01258A);
            color: white;
            font-family: Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column; 
            justify-content: center;
            align-items: center;
            overflow: auto; 
        }

        @font-face {
            font-family: 'logging';
            src: url('fonts/LiberationMono-Regular.ttf');
        }
        
        /* فئة جديدة للقائمة لتنظيف الستايل المضمن */
        .menu-card {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            padding: 40px 20px;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 700px;
            margin-top: 50px; /* تم إبقاء مسافة علوية هنا */
        }

        h1 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        #console {
            font-family: 'logging', monospace;
            font-size: 18px;
            text-align: left;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 10px;
            white-space: pre-wrap;
            height: 300px;
            overflow-y: auto;
            width: 90%; 
            max-width: 700px;
            margin: 20px auto;
        }
        
        .back-button {
            display: block;
            margin: 20px auto; 
            text-align: center;
            padding: 15px 30px; 
            background-color: #007bff; 
            color: white;
            text-decoration: none; 
            border-radius: 8px; 
            width: fit-content; 
            font-size: 18px; 
            transition: background-color 0.3s ease; 
        }
    </style>
</head>

<body style="text-align: center;">

    <div id="loadingContainer" style="display:block; margin-top: 5%;">
        <div id="progress" style="display:block;">
            <h1 style="font-size:25px;text-align:center; color: #E0E0E0;">
                جاري تشغيل الاستغلال... يرجى الانتظار!
            </h1>
        </div>
    </div>

    <div id="mymenu" class="menu-card" style="display:none;">
        
        <h1 style="font-size:25px; color: #E0E0E0; margin-bottom: 20px;">
            خيارات إضافية (Payloads)
        </h1>

        <div style="margin: 15px;">
            <p style="font-size:18px; color: #999;">تغيير إصدار GoldHEN:</p>
            <button class="btn" onclick="loadCustomPayload('pl_goldhen23.bin')">GoldHEN 2.30</button>
            <button class="btn" onclick="loadCustomPayload('pl_goldhenlite.bin')">GoldHEN Lite</button>
            <button class="btn" onclick="loadCustomPayload('pl_goldhenbeta.bin')">GoldHEN Beta</button>
        </div>
        
        <hr style="width: 80%; border-color: #333; margin: 15px auto;">

        <div style="margin: 15px;">
            <p style="font-size:18px; color: #999;">أدوات إضافية:</p>
            <button class="btn" onclick="loadCustomPayload('pl_ftp.bin')">FTP Server</button>
            <button class="btn" onclick="loadCustomPayload('pl_ps4debug.bin')">PS4 Debug</button>
            <button class="btn" onclick="loadCustomPayload('pl_appdumper.bin')">App Dumper</button>
            <button class="btn" onclick="loadCustomPayload('pl_app2usb.bin')">App2USB</button>
        </div>
        
        <hr style="width: 80%; border-color: #333; margin: 15px auto;">

        <div style="margin: 15px;">
            <p style="font-size:18px; color: #999;">النظام والتحميل:</p>
            <button class="btn" onclick="loadCustomPayload('pl_OrbisToolbox.bin')">Orbis Toolbox</button>
            <button class="btn" onclick="loadCustomPayload('pl_disableupdates.bin')">Disable Updates</button>
            <button class="btn" onclick="loadCustomPayload('pl_kerneldumper.bin')">Kernel Dumper</button>
        </div>

        <hr style="width: 80%; border-color: #333; margin: 15px auto;">

        <div style="margin: 15px;">
            <p style="font-size:18px; color: #999;">Linux Loaders:</p>
            <button class="btn" onclick="loadCustomPayload('pl_LinuxLoader.js')">Linux 1GB</button>
            <button class="btn" onclick="loadCustomPayload('pl_LinuxLoader3gb.js')">Linux 3GB</button>
        </div>
        
        <div style="margin-top: 50px;">
            <p style="color: #999; font-size: 16px;">
                **ملاحظة:** يجب تحميل GoldHEN أولاً لتشغيل معظم هذه الخيارات الإضافية.
            </p>
        </div>
    </div>
    
    <a href="https://alssoury.github.io/MS" class="back-button">
        Back To ALssouRy_Station
    </a>
    
    <pre id="console"></pre>
    
    <script src="payload.js"></script>
    <script type="module" src="./alert.mjs"></script>
    
    <script>
        if (window.doJBwithPSFreeLapseExploit) {
            window.log("[INFO] Starting Exploit...");
            window.doJBwithPSFreeLapseExploit();
        } else {
            // هذا يحدث فقط إذا كان ملف bundle.js غير محمل أو لا يحتوي على الدالة
            window.log('[ERROR] Exploit function (doJBwithPSFreeLapseExploit) not found. Check bundle.js.');
        }
    </script>

</body>
</html>